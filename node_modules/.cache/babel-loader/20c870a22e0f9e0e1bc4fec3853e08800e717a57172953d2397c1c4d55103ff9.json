{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useCallback, useEffect, useState } from 'react';\nconst numRows = 3;\nexport const useWeek = (week, calendarList) => {\n  _s();\n  const [weekStartDate, setWeekStartDate] = useState('');\n  const [weekEndDate, setWeekEndDate] = useState('');\n  const [weekSchedule, setWeekSchedule] = useState([]);\n  const [weekData, setWeekData] = useState([]);\n  const getAbleMarix = useCallback(() => {\n    return [[true, true, true, true, true, true, true], [true, true, true, true, true, true, true], [true, true, true, true, true, true, true]];\n  }, []);\n  const getScheduleLength = useCallback((start_date, end_date) => {\n    if (end_date.length === 0) {\n      return 1;\n    } else {\n      var start_date_list = start_date.split('-');\n      var end_date_list = end_date.split('-');\n      var startDate = new Date(parseInt(start_date_list[0]), parseInt(start_date_list[1]), parseInt(start_date_list[2]));\n      var endDate = new Date(parseInt(end_date_list[0]), parseInt(end_date_list[1]), parseInt(end_date_list[2]));\n      return (endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24);\n    }\n  }, []);\n  const getLocation = useCallback((length, ableMartix) => {\n    for (let y = 0; y < numRows; y++) {\n      var checkCount = 0;\n      for (let x = 0; x < 7; x++) {\n        if (ableMartix[y][x]) {\n          checkCount = checkCount + 1;\n          if (checkCount === length) {\n            for (let i = 0; i < length; i++) {\n              ableMartix[y][x - i] = false;\n            }\n            console.log(ableMartix);\n            return {\n              y: y,\n              x: x - checkCount + 1\n            };\n          }\n        }\n      }\n    }\n    return {\n      y: -1,\n      x: -1\n    };\n  }, []);\n  const getWeekSchedule = useCallback(() => {\n    const results = [];\n    calendarList.map(schedule => {\n      if (weekStartDate.length !== 0 && weekEndDate.length !== 0) {\n        if (weekStartDate <= schedule.start_date && schedule.start_date <= weekEndDate || schedule.end_date.length !== 0 && weekStartDate <= schedule.end_date && schedule.end_date <= weekEndDate) {\n          results.push({\n            church_calendar_id: schedule.church_calendar_id,\n            title: schedule.title,\n            content: schedule.content,\n            start_date: weekStartDate > schedule.start_date ? weekStartDate : schedule.start_date,\n            end_date: weekEndDate < schedule.end_date ? weekEndDate : schedule.end_date,\n            is_current_month: schedule.is_current_month,\n            x: 0,\n            y: 0,\n            length: 0\n          });\n        }\n      }\n    });\n    setWeekSchedule(results);\n    setWeekData(results);\n  }, [calendarList, weekEndDate, weekStartDate]);\n  const findLocationSchedule = useCallback(() => {\n    const ableMatrix = getAbleMarix();\n    const results = [];\n    weekSchedule.map(schedule => {\n      const scheduleLength = getScheduleLength(schedule.start_date, schedule.end_date);\n      console.log(schedule.start_date);\n      const {\n        y,\n        x\n      } = getLocation(scheduleLength, ableMatrix);\n    });\n    setWeekData(results);\n  }, [getAbleMarix, getLocation, getScheduleLength, weekSchedule]);\n  useEffect(() => {\n    var start_year = week[0].year.toString();\n    var start_month = week[0].month.toString();\n    start_month = start_month.length === 2 ? start_month : '0' + start_month;\n    var start_date = week[0].date.toString();\n    start_date = start_date.length === 2 ? start_date : '0' + start_date;\n    setWeekStartDate(start_year + '-' + start_month + '-' + start_date);\n    var end_year = week[6].year.toString();\n    var end_month = week[6].month.toString();\n    end_month = end_month.length === 2 ? end_month : '0' + end_month;\n    var end_date = week[6].date.toString();\n    end_date = end_date.length === 2 ? end_date : '0' + end_date;\n    setWeekEndDate(end_year + '-' + end_month + '-' + end_date);\n  }, [week]);\n  useEffect(() => {\n    if (weekStartDate.length !== 0 && weekEndDate.length !== 0) {\n      getWeekSchedule();\n    }\n  }, [weekStartDate, weekEndDate, getWeekSchedule]);\n  useEffect(() => {\n    if (weekData.length !== 0) {\n      findLocationSchedule();\n    }\n  }, [weekData]);\n  return {\n    weekData\n  };\n};\n_s(useWeek, \"cDUQ4xqgH/d5WLjPKY1fZsKexEM=\");","map":{"version":3,"names":["useCallback","useEffect","useState","numRows","useWeek","week","calendarList","_s","weekStartDate","setWeekStartDate","weekEndDate","setWeekEndDate","weekSchedule","setWeekSchedule","weekData","setWeekData","getAbleMarix","getScheduleLength","start_date","end_date","length","start_date_list","split","end_date_list","startDate","Date","parseInt","endDate","getTime","getLocation","ableMartix","y","checkCount","x","i","console","log","getWeekSchedule","results","map","schedule","push","church_calendar_id","title","content","is_current_month","findLocationSchedule","ableMatrix","scheduleLength","start_year","year","toString","start_month","month","date","end_year","end_month"],"sources":["/Users/hooni/Desktop/upten/jooda/www.jooda.org/src/hooks/useWeek.ts"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from 'react'\n\ninterface Date {\n  date: number\n  month: number\n  year: number\n}\ninterface ReturnCalendarList {\n  church_calendar_id: string\n  title: string\n  content: string\n  start_date: string\n  end_date: string\n  is_current_month: boolean\n  x: number\n  y: number\n  length: number\n}\n\ninterface CalendarList {\n  church_calendar_id: string\n  title: string\n  content: string\n  start_date: string\n  end_date: string\n  is_current_month: boolean\n}\nconst numRows = 3\nexport const useWeek = (\n  week: Array<Date>,\n  calendarList: Array<CalendarList>\n) => {\n  const [weekStartDate, setWeekStartDate] = useState<string>('')\n  const [weekEndDate, setWeekEndDate] = useState<string>('')\n  const [weekSchedule, setWeekSchedule] = useState<ReturnCalendarList[]>([])\n  const [weekData, setWeekData] = useState<ReturnCalendarList[]>([])\n\n  const getAbleMarix = useCallback(() => {\n    return [\n      [true, true, true, true, true, true, true],\n      [true, true, true, true, true, true, true],\n      [true, true, true, true, true, true, true],\n    ]\n  }, [])\n  const getScheduleLength = useCallback(\n    (start_date: string, end_date: string) => {\n      if (end_date.length === 0) {\n        return 1\n      } else {\n        var start_date_list = start_date.split('-')\n        var end_date_list = end_date.split('-')\n        var startDate = new Date(\n          parseInt(start_date_list[0]),\n          parseInt(start_date_list[1]),\n          parseInt(start_date_list[2])\n        )\n        var endDate = new Date(\n          parseInt(end_date_list[0]),\n          parseInt(end_date_list[1]),\n          parseInt(end_date_list[2])\n        )\n        return (endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24)\n      }\n    },\n    []\n  )\n  const getLocation = useCallback((length: number, ableMartix: boolean[][]) => {\n    for (let y = 0; y < numRows; y++) {\n      var checkCount = 0\n      for (let x = 0; x < 7; x++) {\n        if (ableMartix[y][x]) {\n          checkCount = checkCount + 1\n          if (checkCount === length) {\n            for (let i = 0; i < length; i++) {\n              ableMartix[y][x - i] = false\n            }\n            console.log(ableMartix)\n            return {\n              y: y,\n              x: x - checkCount + 1,\n            }\n          }\n        }\n      }\n    }\n    return {\n      y: -1,\n      x: -1,\n    }\n  }, [])\n\n  const getWeekSchedule = useCallback(() => {\n    const results: ReturnCalendarList[] = []\n    calendarList.map(schedule => {\n      if (weekStartDate.length !== 0 && weekEndDate.length !== 0) {\n        if (\n          (weekStartDate <= schedule.start_date &&\n            schedule.start_date <= weekEndDate) ||\n          (schedule.end_date.length !== 0 &&\n            weekStartDate <= schedule.end_date &&\n            schedule.end_date <= weekEndDate)\n        ) {\n          results.push({\n            church_calendar_id: schedule.church_calendar_id,\n            title: schedule.title,\n            content: schedule.content,\n            start_date:\n              weekStartDate > schedule.start_date\n                ? weekStartDate\n                : schedule.start_date,\n            end_date:\n              weekEndDate < schedule.end_date ? weekEndDate : schedule.end_date,\n            is_current_month: schedule.is_current_month,\n            x: 0,\n            y: 0,\n            length: 0,\n          })\n        }\n      }\n    })\n\n    setWeekSchedule(results)\n    setWeekData(results)\n  }, [calendarList, weekEndDate, weekStartDate])\n\n  const findLocationSchedule = useCallback(() => {\n    const ableMatrix = getAbleMarix()\n    const results: ReturnCalendarList[] = []\n    weekSchedule.map(schedule => {\n      const scheduleLength = getScheduleLength(\n        schedule.start_date,\n        schedule.end_date\n      )\n      console.log(schedule.start_date)\n      const { y, x } = getLocation(scheduleLength, ableMatrix)\n    })\n\n    setWeekData(results)\n  }, [getAbleMarix, getLocation, getScheduleLength, weekSchedule])\n\n  useEffect(() => {\n    var start_year = week[0].year.toString()\n    var start_month = week[0].month.toString()\n    start_month = start_month.length === 2 ? start_month : '0' + start_month\n    var start_date = week[0].date.toString()\n    start_date = start_date.length === 2 ? start_date : '0' + start_date\n    setWeekStartDate(start_year + '-' + start_month + '-' + start_date)\n    var end_year = week[6].year.toString()\n    var end_month = week[6].month.toString()\n    end_month = end_month.length === 2 ? end_month : '0' + end_month\n    var end_date = week[6].date.toString()\n    end_date = end_date.length === 2 ? end_date : '0' + end_date\n    setWeekEndDate(end_year + '-' + end_month + '-' + end_date)\n  }, [week])\n\n  useEffect(() => {\n    if (weekStartDate.length !== 0 && weekEndDate.length !== 0) {\n      getWeekSchedule()\n    }\n  }, [weekStartDate, weekEndDate, getWeekSchedule])\n\n  useEffect(() => {\n    if (weekData.length !== 0) {\n      findLocationSchedule()\n    }\n  }, [weekData])\n  return { weekData }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}