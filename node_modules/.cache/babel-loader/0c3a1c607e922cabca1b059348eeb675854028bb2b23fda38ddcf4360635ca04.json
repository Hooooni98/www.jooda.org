{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hooni/Desktop/upten/jooda/www.jooda.org/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/hooni/Desktop/upten/jooda/www.jooda.org/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/hooni/Desktop/upten/jooda/www.jooda.org/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/hooni/Desktop/upten/jooda/www.jooda.org/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3;import React,{useEffect}from'react';import styled from'styled-components';import{useState}from'react';import{setAuthToken}from'../../../../api';import{getNotice}from'../../../../api/admin-notification';import{NoticeModal}from'./patch-modal/modal';import{usePage}from'../../../../hooks/usePage';import{Page}from'../../../../component/page';import{InnerBoxContainer,InnerBoxHeader,InnerBoxTitle,MainContainer}from'../../../../component/styledComponent';import{InfoBox,infoBoxTexts}from'../../../../component/box/info';import{EmptyText}from'../../../../component/empty_text';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NoticeBox=styled.button(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  box-sizing: border-box;\\n  margin-top: 16px;\\n  border-radius: 16px;\\n  height: 80px;\\n  border: 1px solid #c1c2c3;\\n  background: #ffffff;\\n  cursor: pointer;\\n\\n  &:hover {\\n    border: 2px solid #000000;\\n  }\\n\"])));var NoticeTitle=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  font-family: 'Spoqa Han Sans Neo';\\n  text-align: left;\\n  font-style: normal;\\n  font-weight: 700;\\n  font-size: 16px;\\n  padding: 4px 0 0 24px;\\n  color: #000000;\\n\"])));var NoticeSubTitle=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  font-family: 'Spoqa Han Sans Neo';\\n  text-align: left;\\n  font-style: normal;\\n  font-weight: 500;\\n  font-size: 14px;\\n  color: #797a7b;\\n  padding: 4px 0 0 24px;\\n\"])));var pagePerLimit=7;export var InnerListPage=function InnerListPage(props){var refresh=props.refresh,setRefresh=props.setRefresh;var _useState=useState([{church_notice_id:'',title:'',content:'',image:'',created_at:''}]),_useState2=_slicedToArray(_useState,2),noticeData=_useState2[0],setNoticeData=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),currentIndex=_useState4[0],setIndex=_useState4[1];var _usePage=usePage(),pageList=_usePage.pageList,currentPage=_usePage.currentPage,maxPage=_usePage.maxPage,getPrevPage=_usePage.getPrevPage,getNextPage=_usePage.getNextPage,clickPage=_usePage.clickPage,setMaxPage=_usePage.setMaxPage;useEffect(function(){var token=localStorage.getItem('token');if(token){setAuthToken(token);}var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getNotice((currentPage-1)*pagePerLimit);case 2:response=_context.sent;setNoticeData(response.payload.church_notice_list.results);setMaxPage(Math.ceil(response.payload.church_notice_list.total_count/pagePerLimit));case 5:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[refresh]);var getNoticePage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(page){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getNotice((page-1)*pagePerLimit);case 2:response=_context2.sent;setNoticeData(response.payload.church_notice_list.results);case 4:case\"end\":return _context2.stop();}},_callee2);}));return function getNoticePage(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){getNoticePage(currentPage);},[currentPage]);// Modal\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showModal=_useState6[0],setShowModal=_useState6[1];var handleButtonClick=function handleButtonClick(index){setShowModal(true);setIndex(index);};var handleCloseModal=function handleCloseModal(){setShowModal(false);};return/*#__PURE__*/_jsxs(MainContainer,{children:[/*#__PURE__*/_jsx(InnerBoxHeader,{children:/*#__PURE__*/_jsx(InnerBoxTitle,{children:\"\\uACF5\\uC9C0\\uC0AC\\uD56D \\uBAA9\\uB85D\"})}),/*#__PURE__*/_jsxs(InnerBoxContainer,{children:[/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:36}}),/*#__PURE__*/_jsx(InfoBox,{text:infoBoxTexts.default}),/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:20}}),noticeData.length!==0?noticeData.map(function(notice,index){return/*#__PURE__*/_jsxs(NoticeBox,{onClick:function onClick(){return handleButtonClick(index);},children:[/*#__PURE__*/_jsx(NoticeTitle,{children:notice.title}),/*#__PURE__*/_jsx(NoticeSubTitle,{children:notice.created_at.substring(0,10).replace(/-/gi,'.')})]});}):/*#__PURE__*/_jsx(EmptyText,{text:\"\\uB4F1\\uB85D\\uB41C \\uACF5\\uC9C0\\uC0AC\\uD56D\\uC774 \\uC5C6\\uC5B4\\uC694.\"}),showModal&&/*#__PURE__*/_jsx(NoticeModal,{refresh:refresh,setRefresh:setRefresh,onCloseModal:handleCloseModal,church_notice_id:noticeData[currentIndex].church_notice_id,notice_title:noticeData[currentIndex].title,notice_content:noticeData[currentIndex].content,notice_image:noticeData[currentIndex].image}),/*#__PURE__*/_jsx(Page,{pageList:pageList,currentPage:currentPage,getPrevPage:getPrevPage,getNextPage:getNextPage,clickPage:clickPage,lastPage:maxPage})]}),/*#__PURE__*/_jsx(\"div\",{style:{height:'24px'}})]});};","map":{"version":3,"names":["React","useEffect","styled","useState","setAuthToken","getNotice","NoticeModal","usePage","Page","InnerBoxContainer","InnerBoxHeader","InnerBoxTitle","MainContainer","InfoBox","infoBoxTexts","EmptyText","jsx","_jsx","jsxs","_jsxs","NoticeBox","button","_templateObject","_taggedTemplateLiteral","NoticeTitle","div","_templateObject2","NoticeSubTitle","_templateObject3","pagePerLimit","InnerListPage","props","refresh","setRefresh","_useState","church_notice_id","title","content","image","created_at","_useState2","_slicedToArray","noticeData","setNoticeData","_useState3","_useState4","currentIndex","setIndex","_usePage","pageList","currentPage","maxPage","getPrevPage","getNextPage","clickPage","setMaxPage","token","localStorage","getItem","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","sent","payload","church_notice_list","results","Math","ceil","total_count","stop","apply","arguments","getNoticePage","_ref2","_callee2","page","_callee2$","_context2","_x","_useState5","_useState6","showModal","setShowModal","handleButtonClick","index","handleCloseModal","children","style","paddingTop","text","default","length","map","notice","onClick","substring","replace","onCloseModal","notice_title","notice_content","notice_image","lastPage","height"],"sources":["/Users/hooni/Desktop/upten/jooda/www.jooda.org/src/admin-pages/admin-nav/admin-notification/list/index.tsx"],"sourcesContent":["import React, { Dispatch, SetStateAction, useEffect } from 'react'\nimport styled from 'styled-components'\nimport { useState, useRef } from 'react'\nimport { setAuthToken } from '../../../../api'\nimport { getNotice } from '../../../../api/admin-notification'\nimport { NoticeModal } from './patch-modal/modal'\nimport { usePage } from '../../../../hooks/usePage'\nimport { Page } from '../../../../component/page'\nimport {\n  InnerBoxContainer,\n  InnerBoxHeader,\n  InnerBoxTitle,\n  MainContainer,\n} from '../../../../component/styledComponent'\nimport { InfoBox, infoBoxTexts } from '../../../../component/box/info'\nimport { EmptyText } from '../../../../component/empty_text'\n\nconst NoticeBox = styled.button`\n  width: 100%;\n  box-sizing: border-box;\n  margin-top: 16px;\n  border-radius: 16px;\n  height: 80px;\n  border: 1px solid #c1c2c3;\n  background: #ffffff;\n  cursor: pointer;\n\n  &:hover {\n    border: 2px solid #000000;\n  }\n`\n\nconst NoticeTitle = styled.div`\n  font-family: 'Spoqa Han Sans Neo';\n  text-align: left;\n  font-style: normal;\n  font-weight: 700;\n  font-size: 16px;\n  padding: 4px 0 0 24px;\n  color: #000000;\n`\n\nconst NoticeSubTitle = styled.div`\n  font-family: 'Spoqa Han Sans Neo';\n  text-align: left;\n  font-style: normal;\n  font-weight: 500;\n  font-size: 14px;\n  color: #797a7b;\n  padding: 4px 0 0 24px;\n`\n\ninterface NoticeData {\n  church_notice_id: string\n  title: string\n  content: string\n  image: string | ''\n  created_at: string\n}\n\ninterface NoticePropType {\n  refresh: boolean\n  setRefresh: Dispatch<SetStateAction<boolean>>\n}\nconst pagePerLimit = 7\nexport const InnerListPage = (props: NoticePropType) => {\n  const { refresh, setRefresh } = props\n  const [noticeData, setNoticeData] = useState<Array<NoticeData>>([\n    {\n      church_notice_id: '',\n      title: '',\n      content: '',\n      image: '',\n      created_at: '',\n    },\n  ])\n  const [currentIndex, setIndex] = useState(0)\n\n  const {\n    pageList,\n    currentPage,\n    maxPage,\n    getPrevPage,\n    getNextPage,\n    clickPage,\n    setMaxPage,\n  } = usePage()\n\n  useEffect(() => {\n    const token = localStorage.getItem('token')\n    if (token) {\n      setAuthToken(token)\n    }\n\n    const fetchData = async () => {\n      const response = await getNotice((currentPage - 1) * pagePerLimit)\n      setNoticeData(response.payload.church_notice_list.results)\n      setMaxPage(\n        Math.ceil(\n          response.payload.church_notice_list.total_count / pagePerLimit\n        )\n      )\n    }\n\n    fetchData()\n  }, [refresh])\n\n  const getNoticePage = async (page: number) => {\n    const response = await getNotice((page - 1) * pagePerLimit)\n    setNoticeData(response.payload.church_notice_list.results)\n  }\n\n  useEffect(() => {\n    getNoticePage(currentPage)\n  }, [currentPage])\n\n  // Modal\n  const [showModal, setShowModal] = useState(false)\n\n  const handleButtonClick = (index: number) => {\n    setShowModal(true)\n    setIndex(index)\n  }\n\n  const handleCloseModal = () => {\n    setShowModal(false)\n  }\n\n  return (\n    <MainContainer>\n      <InnerBoxHeader>\n        <InnerBoxTitle>공지사항 목록</InnerBoxTitle>\n      </InnerBoxHeader>\n      <InnerBoxContainer>\n        <div style={{ paddingTop: 36 }} />\n        <InfoBox text={infoBoxTexts.default} />\n        <div style={{ paddingTop: 20 }} />\n        {noticeData.length !== 0 ? (\n          noticeData.map((notice, index) => {\n            return (\n              <NoticeBox onClick={() => handleButtonClick(index)}>\n                <NoticeTitle>{notice.title}</NoticeTitle>\n                <NoticeSubTitle>\n                  {notice.created_at.substring(0, 10).replace(/-/gi, '.')}\n                </NoticeSubTitle>\n              </NoticeBox>\n            )\n          })\n        ) : (\n          <EmptyText text=\"등록된 공지사항이 없어요.\" />\n        )}\n\n        {showModal && (\n          <NoticeModal\n            refresh={refresh}\n            setRefresh={setRefresh}\n            onCloseModal={handleCloseModal}\n            church_notice_id={noticeData[currentIndex].church_notice_id}\n            notice_title={noticeData[currentIndex].title}\n            notice_content={noticeData[currentIndex].content}\n            notice_image={noticeData[currentIndex].image}\n          />\n        )}\n        <Page\n          pageList={pageList}\n          currentPage={currentPage}\n          getPrevPage={getPrevPage}\n          getNextPage={getNextPage}\n          clickPage={clickPage}\n          lastPage={maxPage}\n        />\n      </InnerBoxContainer>\n\n      <div\n        style={{\n          height: '24px',\n        }}\n      />\n    </MainContainer>\n  )\n}\n"],"mappings":"smBAAA,MAAO,CAAAA,KAAK,EAA8BC,SAAS,KAAQ,OAAO,CAClE,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CACtC,OAASC,QAAQ,KAAgB,OAAO,CACxC,OAASC,YAAY,KAAQ,iBAAiB,CAC9C,OAASC,SAAS,KAAQ,oCAAoC,CAC9D,OAASC,WAAW,KAAQ,qBAAqB,CACjD,OAASC,OAAO,KAAQ,2BAA2B,CACnD,OAASC,IAAI,KAAQ,4BAA4B,CACjD,OACEC,iBAAiB,CACjBC,cAAc,CACdC,aAAa,CACbC,aAAa,KACR,uCAAuC,CAC9C,OAASC,OAAO,CAAEC,YAAY,KAAQ,gCAAgC,CACtE,OAASC,SAAS,KAAQ,kCAAkC,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE5D,GAAM,CAAAC,SAAS,CAAGlB,MAAM,CAACmB,MAAM,CAAAC,eAAA,GAAAA,eAAA,CAAAC,sBAAA,iPAa9B,CAED,GAAM,CAAAC,WAAW,CAAGtB,MAAM,CAACuB,GAAG,CAAAC,gBAAA,GAAAA,gBAAA,CAAAH,sBAAA,kLAQ7B,CAED,GAAM,CAAAI,cAAc,CAAGzB,MAAM,CAACuB,GAAG,CAAAG,gBAAA,GAAAA,gBAAA,CAAAL,sBAAA,kLAQhC,CAcD,GAAM,CAAAM,YAAY,CAAG,CAAC,CACtB,MAAO,IAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,KAAqB,CAAK,CACtD,GAAQ,CAAAC,OAAO,CAAiBD,KAAK,CAA7BC,OAAO,CAAEC,UAAU,CAAKF,KAAK,CAApBE,UAAU,CAC3B,IAAAC,SAAA,CAAoC/B,QAAQ,CAAoB,CAC9D,CACEgC,gBAAgB,CAAE,EAAE,CACpBC,KAAK,CAAE,EAAE,CACTC,OAAO,CAAE,EAAE,CACXC,KAAK,CAAE,EAAE,CACTC,UAAU,CAAE,EACd,CAAC,CACF,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAP,SAAA,IARKQ,UAAU,CAAAF,UAAA,IAAEG,aAAa,CAAAH,UAAA,IAShC,IAAAI,UAAA,CAAiCzC,QAAQ,CAAC,CAAC,CAAC,CAAA0C,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArCE,YAAY,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IAE7B,IAAAG,QAAA,CAQIzC,OAAO,EAAE,CAPX0C,QAAQ,CAAAD,QAAA,CAARC,QAAQ,CACRC,WAAW,CAAAF,QAAA,CAAXE,WAAW,CACXC,OAAO,CAAAH,QAAA,CAAPG,OAAO,CACPC,WAAW,CAAAJ,QAAA,CAAXI,WAAW,CACXC,WAAW,CAAAL,QAAA,CAAXK,WAAW,CACXC,SAAS,CAAAN,QAAA,CAATM,SAAS,CACTC,UAAU,CAAAP,QAAA,CAAVO,UAAU,CAGZtD,SAAS,CAAC,UAAM,CACd,GAAM,CAAAuD,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACTpD,YAAY,CAACoD,KAAK,CAAC,CACrB,CAEA,GAAM,CAAAG,SAAS,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACO,CAAAjE,SAAS,CAAC,CAAC6C,WAAW,CAAG,CAAC,EAAIrB,YAAY,CAAC,QAA5DoC,QAAQ,CAAAG,QAAA,CAAAG,IAAA,CACd5B,aAAa,CAACsB,QAAQ,CAACO,OAAO,CAACC,kBAAkB,CAACC,OAAO,CAAC,CAC1DnB,UAAU,CACRoB,IAAI,CAACC,IAAI,CACPX,QAAQ,CAACO,OAAO,CAACC,kBAAkB,CAACI,WAAW,CAAGhD,YAAY,CAC/D,CACF,yBAAAuC,QAAA,CAAAU,IAAA,MAAAd,OAAA,GACF,kBARK,CAAAL,SAASA,CAAA,SAAAC,IAAA,CAAAmB,KAAA,MAAAC,SAAA,OAQd,CAEDrB,SAAS,EAAE,CACb,CAAC,CAAE,CAAC3B,OAAO,CAAC,CAAC,CAEb,GAAM,CAAAiD,aAAa,6BAAAC,KAAA,CAAArB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAoB,SAAOC,IAAY,MAAAnB,QAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAmB,UAAAC,SAAA,iBAAAA,SAAA,CAAAjB,IAAA,CAAAiB,SAAA,CAAAhB,IAAA,SAAAgB,SAAA,CAAAhB,IAAA,SAChB,CAAAjE,SAAS,CAAC,CAAC+E,IAAI,CAAG,CAAC,EAAIvD,YAAY,CAAC,QAArDoC,QAAQ,CAAAqB,SAAA,CAAAf,IAAA,CACd5B,aAAa,CAACsB,QAAQ,CAACO,OAAO,CAACC,kBAAkB,CAACC,OAAO,CAAC,yBAAAY,SAAA,CAAAR,IAAA,MAAAK,QAAA,GAC3D,kBAHK,CAAAF,aAAaA,CAAAM,EAAA,SAAAL,KAAA,CAAAH,KAAA,MAAAC,SAAA,OAGlB,CAED/E,SAAS,CAAC,UAAM,CACdgF,aAAa,CAAC/B,WAAW,CAAC,CAC5B,CAAC,CAAE,CAACA,WAAW,CAAC,CAAC,CAEjB;AACA,IAAAsC,UAAA,CAAkCrF,QAAQ,CAAC,KAAK,CAAC,CAAAsF,UAAA,CAAAhD,cAAA,CAAA+C,UAAA,IAA1CE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAE9B,GAAM,CAAAG,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAAIC,KAAa,CAAK,CAC3CF,YAAY,CAAC,IAAI,CAAC,CAClB5C,QAAQ,CAAC8C,KAAK,CAAC,CACjB,CAAC,CAED,GAAM,CAAAC,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAA,CAAS,CAC7BH,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAED,mBACExE,KAAA,CAACP,aAAa,EAAAmF,QAAA,eACZ9E,IAAA,CAACP,cAAc,EAAAqF,QAAA,cACb9E,IAAA,CAACN,aAAa,EAAAoF,QAAA,CAAC,uCAAO,EAAgB,EACvB,cACjB5E,KAAA,CAACV,iBAAiB,EAAAsF,QAAA,eAChB9E,IAAA,QAAK+E,KAAK,CAAE,CAAEC,UAAU,CAAE,EAAG,CAAE,EAAG,cAClChF,IAAA,CAACJ,OAAO,EAACqF,IAAI,CAAEpF,YAAY,CAACqF,OAAQ,EAAG,cACvClF,IAAA,QAAK+E,KAAK,CAAE,CAAEC,UAAU,CAAE,EAAG,CAAE,EAAG,CACjCvD,UAAU,CAAC0D,MAAM,GAAK,CAAC,CACtB1D,UAAU,CAAC2D,GAAG,CAAC,SAACC,MAAM,CAAET,KAAK,CAAK,CAChC,mBACE1E,KAAA,CAACC,SAAS,EAACmF,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAX,iBAAiB,CAACC,KAAK,CAAC,EAAC,CAAAE,QAAA,eACjD9E,IAAA,CAACO,WAAW,EAAAuE,QAAA,CAAEO,MAAM,CAAClE,KAAK,EAAe,cACzCnB,IAAA,CAACU,cAAc,EAAAoE,QAAA,CACZO,MAAM,CAAC/D,UAAU,CAACiE,SAAS,CAAC,CAAC,CAAE,EAAE,CAAC,CAACC,OAAO,CAAC,KAAK,CAAE,GAAG,CAAC,EACxC,GACP,CAEhB,CAAC,CAAC,cAEFxF,IAAA,CAACF,SAAS,EAACmF,IAAI,CAAC,uEAAgB,EACjC,CAEAR,SAAS,eACRzE,IAAA,CAACX,WAAW,EACV0B,OAAO,CAAEA,OAAQ,CACjBC,UAAU,CAAEA,UAAW,CACvByE,YAAY,CAAEZ,gBAAiB,CAC/B3D,gBAAgB,CAAEO,UAAU,CAACI,YAAY,CAAC,CAACX,gBAAiB,CAC5DwE,YAAY,CAAEjE,UAAU,CAACI,YAAY,CAAC,CAACV,KAAM,CAC7CwE,cAAc,CAAElE,UAAU,CAACI,YAAY,CAAC,CAACT,OAAQ,CACjDwE,YAAY,CAAEnE,UAAU,CAACI,YAAY,CAAC,CAACR,KAAM,EAEhD,cACDrB,IAAA,CAACT,IAAI,EACHyC,QAAQ,CAAEA,QAAS,CACnBC,WAAW,CAAEA,WAAY,CACzBE,WAAW,CAAEA,WAAY,CACzBC,WAAW,CAAEA,WAAY,CACzBC,SAAS,CAAEA,SAAU,CACrBwD,QAAQ,CAAE3D,OAAQ,EAClB,GACgB,cAEpBlC,IAAA,QACE+E,KAAK,CAAE,CACLe,MAAM,CAAE,MACV,CAAE,EACF,GACY,CAEpB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}